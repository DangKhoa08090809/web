<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>ECU System</title>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
        />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <div class="navbar">
            <button>T√™n NSX</button>
            <button>Feedback</button>
            <button>Help</button>
            <button>Setting</button>
            <button id="authBtn" onclick="openLoginModal()">Log in</button>
        </div>

        <div id="loginModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üîê User Login</h2>
                    <span class="close" onclick="closeLoginModal()"
                        >&times;</span
                    >
                </div>
                <div class="modal-body">
                    <input
                        type="text"
                        id="username"
                        placeholder="üë§ Username"
                    />
                    <input
                        type="password"
                        id="password"
                        placeholder="üîë Password"
                    />
                    <button onclick="login()">Log in</button>
                    <p
                        id="loginMessage"
                        style="margin-top: 10px; color: red"
                    ></p>
                    <p>if you don't have any account? Let's sign up</p>
                    <button>sign up</button>
                </div>
            </div>
        </div>

        <div>
            <div class="container">
                <!-- Left (Dashboards) -->
                <div class="left">
                    <div class="card top" onclick="openModal('stats')">
                        <h2>üìà Vehicle Statistics</h2>
                    </div>
                    <div class="bottom">
                        <div class="card" onclick="openModal('alerts')">
                            <h2>‚ö†Ô∏è Alerts</h2>
                        </div>
                        <div class="card" onclick="openModal('maintenance')">
                            <h2>üõ†Ô∏è Maintenance</h2>
                        </div>
                    </div>
                </div>

                <!-- Right (System Info) -->
                <div class="right">
                    <h1>üöò ECU System</h1>
                    <p class="description">
                        T√≠ch h·ª£p AI, th√¥ng b√°o ƒë·∫©y, th·ªùi gian th·ª±c, giao di·ªán
                        th√¢n thi·ªán.
                    </p>
                </div>
            </div>

            <!-- Fullscreen Modal -->
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modal-title"></h2>
                        <span class="close" onclick="closeModal()"
                            >&times;</span
                        >
                    </div>

                    <!-- ‚úÖ Modal body ch·ª©a lu√¥n chat + maintenance -->
                    <div class="modal-body" id="modal-body">
                        <div id="modalText">Loading...</div>

                        <!-- üîπ Th√™m canvas ƒë·ªÉ JS c√≥ th·ªÉ t√¨m th·∫•y -->
                        <div class="chart-container">
                            <canvas id="statsChart"></canvas>
                        </div>

                        <!-- Danh s√°ch b·∫£o tr√¨ -->
                        <div
                            id="maintenanceList"
                            style="margin-top: 15px"
                        ></div>

                        <!-- Chat Box -->
                        <div
                            id="chatBox"
                            class="chat-box"
                            style="display: none"
                        >
                            <div id="chatMessages" class="chat-messages"></div>
                            <div class="chat-input-container">
                                <input
                                    type="text"
                                    id="chatInput"
                                    placeholder="üí¨ Nh·∫≠p tin nh·∫Øn..."
                                    onkeypress="if(event.key==='Enter'){sendMessage();}"
                                />
                                <button onclick="sendMessage()">G·ª≠i</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="{{ url_for('static', filename='logic.js') }}"></script>
    </body>
</html>
